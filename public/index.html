<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Glass Switch 클릭커 - 업그레이드 버전</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Baloo+2&display=swap');

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Baloo 2', cursive;
      background: #fffbf5;
      color: #5a4d41;
      margin: 0;
      padding-top: 60px; /* 점수 박스 공간 확보 */
      min-height: 100vh;
      user-select: none;
      overflow-x: hidden;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      position: relative;
    }

    /* 점수 박스 - 상단 고정, 100vw */
    #points {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 60px;
      background: linear-gradient(135deg, #ffd6cd 0%, #ff9e8c 100%);
      color: #7c3f2a;
      font-weight: 900;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      text-shadow: 1px 1px 3px #f8b9aa;
      box-shadow: 0 2px 6px rgba(255,150,120,0.4);
      z-index: 100;
      user-select: text;
      font-family: 'Baloo 2', cursive;
    }

    /* 클릭 버튼 중앙 배치 */
    #glass-switch {
      width: 180px;
      height: 90px;
      background: linear-gradient(135deg, #ffdad4 0%, #ffd7b2 100%);
      border-radius: 45px;
      box-shadow: 0 8px 12px rgba(255, 169, 142, 0.7);
      color: #a35e4e;
      font-size: 2.8rem;
      font-weight: 700;
      text-align: center;
      line-height: 90px;
      cursor: pointer;
      transition: transform 0.15s ease;
      border: 2px solid #f6c6b6;
      user-select: none;
      margin-bottom: 30px;
      letter-spacing: 1.5px;
      font-family: 'Baloo 2', cursive;
      z-index: 50;
    }
    #glass-switch:active {
      transform: scale(0.95);
      box-shadow: 0 5px 8px rgba(255, 140, 100, 0.9);
      color: #874d3f;
      background: linear-gradient(135deg, #ffb59d 0%, #ff9a70 100%);
    }

    /* 상점 버튼 중앙 하단에 고정 */
    #shop-toggle-btn {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: #f7b5a8;
      color: #754c42;
      border: none;
      border-radius: 24px;
      padding: 14px 40px;
      font-size: 1.4rem;
      cursor: pointer;
      box-shadow: 0 5px 12px rgba(247, 181, 168, 0.7);
      transition: background-color 0.3s ease;
      user-select: none;
      font-family: 'Baloo 2', cursive;
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 100;
    }
    #shop-toggle-btn:hover {
      background: #f18d79;
      box-shadow: 0 7px 16px rgba(241, 141, 121, 0.9);
    }

    /* 알림 빨간 점 (종 아이콘 오른쪽 위) */
    #shop-notify {
      position: relative;
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    #shop-notify svg {
      width: 100%;
      height: 100%;
      fill: #754c42;
      filter: drop-shadow(0 0 1px #f18d79);
    }

    #notify-dot {
      position: absolute;
      top: 2px;
      right: 2px;
      width: 10px;
      height: 10px;
      background: #ff3b3b;
      border-radius: 50%;
      box-shadow: 0 0 5px #ff3b3baa;
      display: none; /* 구매 가능 시 보임 */
    }

    /* 상점 모달 - 오른쪽 슬라이드 */
    #shop-modal {
      position: fixed;
      top: 60px;
      right: 0;
      width: 350px;
      height: calc(100vh - 60px);
      background: #fff1ec;
      border-radius: 16px 0 0 16px;
      box-shadow: -6px 0 20px rgba(247, 181, 168, 0.5);
      overflow-y: auto;
      padding: 20px 25px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      font-family: 'Baloo 2', cursive;
      transform: translateX(100%);
      transition: transform 0.35s ease;
      z-index: 99;
    }
    #shop-modal.open {
      transform: translateX(0);
    }

    .item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #ffd8cc;
      border-radius: 18px;
      padding: 12px 20px;
      box-shadow: inset 0 0 10px rgba(255, 178, 150, 0.3);
      font-size: 1.2rem;
      color: #7c4c3a;
      transition: background-color 0.3s ease;
    }
    .item:hover {
      background: #ffbea9;
    }
    .item .left {
      display: flex;
      align-items: center;
      gap: 14px;
      flex: 1;
    }
    .item img {
      width: 40px;
      height: 40px;
      user-select: none;
      filter: drop-shadow(0 1px 1px rgba(255,140,100,0.3));
      border-radius: 8px;
      object-fit: contain;
      background: #fff4f0;
      padding: 4px;
    }
    .item .info {
      flex: 1;
      font-weight: 600;
    }
    .item button {
      background: #f7a592;
      border: none;
      color: white;
      padding: 10px 22px;
      border-radius: 20px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
      font-family: 'Baloo 2', cursive;
      box-shadow: 0 5px 10px rgba(247, 165, 146, 0.6);
    }
    .item button:disabled {
      background: #d8beb7;
      cursor: not-allowed;
      box-shadow: none;
      color: #9b7a6d;
    }
    .item button:hover:not(:disabled) {
      background: #e4715b;
    }
  </style>
</head>
<body>

  <div id="points">0</div>

  <button id="glass-switch" title="클릭해서 포인트 획득!">Glass Switch</button>

  <button id="shop-toggle-btn">
    <span>상점 열기 / 닫기</span>
    <span id="shop-notify" aria-label="구매 가능 알림">
      <!-- 종 아이콘 SVG -->
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 22c1.1 0 1.99-.9 1.99-2H10c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4a1.5 1.5 0 00-3 0v.68C7.63 5.36 6 7.92 6 11v5l-1.7 1.7a1 1 0 00.7 1.7h12a1 1 0 00.7-1.7L18 16z"/>
      </svg>
      <span id="notify-dot"></span>
    </span>
  </button>

  <div id="shop-modal"></div>

  <script>
    const pointsEl = document.getElementById('points');
    const glassSwitchBtn = document.getElementById('glass-switch');
    const shopToggleBtn = document.getElementById('shop-toggle-btn');
    const shopModal = document.getElementById('shop-modal');
    const notifyDot = document.getElementById('notify-dot');

    let points = 0;
    let clickPower = 1;
    let cps = 0;

    const items = [
      { id: 1, name: 'Cursor', type: 'click', power: 1, price: 25, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/cursor.png' },
      { id: 2, name: 'Auto Glass', type: 'auto', power: 1, price: 100, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/automatic.png' },
      { id: 3, name: 'Glass Farm', type: 'auto', power: 10, price: 500, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/factory.png' },
      { id: 4, name: 'Glass Mine', type: 'auto', power: 100, price: 6500, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/mining.png' },
      { id: 5, name: 'Silver Cursor', type: 'click', power: 2000, price: 150000, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/silver-coin.png' },
      { id: 6, name: 'Glass Factory', type: 'auto', power: 15000, price: 2000000, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/industry.png' },
      { id: 7, name: 'Glass Lab', type: 'auto', power: 250000, price: 20000000, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/laboratory.png' },
      { id: 8, name: 'Glass Temple', type: 'auto', power: 5000000, price: 125000000, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/temple.png' },
      { id: 9, name: 'Gold Cursor', type: 'click', power: 2000000, price: 200000000, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/gold-bar.png' },
      { id: 10, name: 'Glass Rocket', type: 'auto', power: 100000000, price: 5000000000, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/rocket.png' },
      { id: 11, name: 'Glass God', type: 'auto', power: 5000000000, price: 100000000000, owned: 0, icon: 'https://img.icons8.com/ios-filled/50/f27c7c/god-mode.png' },
    ];

    function formatNum(num) {
      if (num < 1000) return num.toString();
      if (num < 1_000_000) return (num/1000).toFixed(1) + 'K';
      if (num < 1_000_000_000) return (num/1_000_000).toFixed(1) + 'M';
      if (num < 1_000_000_000_000) return (num/1_000_000_000).toFixed(1) + 'B';
      return (num/1_000_000_000_000).toFixed(1) + 'T';
    }

    function updateButtons() {
      let canBuyAny = false;
      items.forEach(item => {
        const canBuy = points >= item.price;
        item.btn.disabled = !canBuy;
        if (canBuy) canBuyAny = true;
      });
      // 구매 가능 아이템 있으면 알림 점 보여주기
      notifyDot.style.display = canBuyAny ? 'block' : 'none';
    }

    function updateUI() {
      pointsEl.textContent = formatNum(points);
      items.forEach(item => {
        item.priceEl.textContent = formatNum(item.price);
      });
      updateButtons();
    }

    function createItemElement(item) {
      const div = document.createElement('div');
      div.className = 'item';

      const left = document.createElement('div');
      left.className = 'left';

      const icon = document.createElement('img');
      icon.src = item.icon;
      icon.alt = item.name + ' 아이콘';

      const info = document.createElement('div');
      info.className = 'info';
      info.textContent = `${item.name} (${item.type === 'click' ? '클릭 증가량 +'+item.power : '초당 증가량 +'+item.power}) - 가격: `;

      const priceSpan = document.createElement('span');
      priceSpan.id = `price${item.id}`;
      priceSpan.textContent = formatNum(item.price);
      item.priceEl = priceSpan;

      info.appendChild(priceSpan);
      left.appendChild(icon);
      left.appendChild(info);
      div.appendChild(left);

      const btn = document.createElement('button');
      btn.id = `buy${item.id}`;
      btn.textContent = '구매';
      btn.disabled = true;
      item.btn = btn;

      btn.addEventListener('click', () => {
        if (points >= item.price) {
          points -= item.price;
          item.owned++;
          if (item.type === 'click') {
            clickPower += item.power;
          } else {
            cps += item.power;
          }
          item.price = Math.floor(item.price * 1.2);
          updateUI();
        }
      });

      div.appendChild(btn);

      return div;
    }

    shopToggleBtn.addEventListener('click', () => {
      if (shopModal.classList.contains('open')) {
        shopModal.classList.remove('open');
      } else {
        shopModal.classList.add('open');
      }
    });

    glassSwitchBtn.addEventListener('click', () => {
      points += clickPower;
      updateUI();
    });

    items.forEach(item => {
      const el = createItemElement(item);
      shopModal.appendChild(el);
    });

    setInterval(() => {
      points += cps;
      updateUI();
    }, 1000);

    updateUI();
  </script>

</body>
</html>
